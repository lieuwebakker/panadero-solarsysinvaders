<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSI Game Core Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        .test-container {
            border: 2px solid #333;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px auto;
            width: fit-content;
        }
        .test-info {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #333;
            border-radius: 8px;
        }
        .test-status {
            margin: 10px 0;
            padding: 10px;
            background: #444;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Solar System Invaders - Core Gameplay Test</h1>
    
    <div class="test-info">
        <h3>Test Instructions:</h3>
        <p>üñ±Ô∏è <strong>Click the canvas:</strong> Start the game</p>
        <p>‚¨ÖÔ∏è‚û°Ô∏è <strong>Arrow Left/Right:</strong> Rotate ship</p>
        <p>‚¨ÜÔ∏è <strong>Arrow Up:</strong> Thrust (engine flame)</p>
        <p>üîÑ <strong>Ship wraps around screen edges</strong></p>
    </div>
    
    <div class="test-status" id="testStatus">
        Status: Loading test...
    </div>
    
    <div class="test-container">
        <canvas id="testCanvas" width="600" height="400" style="border: 1px solid #666;"></canvas>
    </div>

    <script type="module">
        import { Ship } from './src/core/Ship.js';
        import { CanvasManager } from './src/core/Canvas.js';
        
        const canvas = document.getElementById('testCanvas');
        const status = document.getElementById('testStatus');
        
        let ship = null;
        let canvasManager = null;
        let gameRunning = false;
        
        // Initialize
        canvasManager = new CanvasManager(canvas, 600, 400);
        ship = new Ship(300, 200, 600, 400);
        
        status.textContent = 'Status: Ready - Click to start!';
        
        // Game loop
        function gameLoop() {
            const ctx = canvasManager.ctx;
            
            // Clear canvas
            ctx.clearRect(0, 0, 600, 400);
            
            // Draw background
            ctx.fillStyle = '#000033';
            ctx.fillRect(0, 0, 600, 400);
            
            if (gameRunning && ship) {
                // Update and draw ship
                ship.move();
                ship.draw(ctx);
            } else {
                // Draw start screen
                ctx.fillStyle = 'white';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('Click to Start Test', 300, 200);
                ctx.font = '16px Arial';
                ctx.fillText('Use arrow keys to control ship', 300, 240);
            }
            
            requestAnimationFrame(gameLoop);
        }
        
        // Start game loop
        gameLoop();
        
        // Handle click to start
        canvas.addEventListener('click', () => {
            if (!gameRunning) {
                gameRunning = true;
                status.textContent = 'Status: Game running - Use arrow keys!';
            }
        });
        
        // Handle keyboard input
        window.addEventListener('keydown', (e) => {
            if (!ship || !gameRunning) return;
            
            switch(e.code) {
                case 'ArrowLeft': 
                    ship.rotatingLeft = true; 
                    break;
                case 'ArrowRight': 
                    ship.rotatingRight = true;
                    break;
                case 'ArrowUp': 
                    ship.engineOn = true;
                    break;
            }
        });
        
        window.addEventListener('keyup', (e) => {
            if (!ship || !gameRunning) return;
            
            switch(e.code) {
                case 'ArrowLeft': ship.rotatingLeft = false; break;
                case 'ArrowRight': ship.rotatingRight = false; break;
                case 'ArrowUp': ship.engineOn = false; break;
            }
        });
        
        console.log('Test game initialized successfully');
    </script>
</body>
</html> 